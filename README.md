# üìö BookSoul Factory v2.2

### üß© –û–ø–∏—Å–∞–Ω–∏–µ
**BookSoul** ‚Äî —ç—Ç–æ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞—è –º–∏–Ω–∏-—Ñ–∞–±—Ä–∏–∫–∞, —Å–æ–∑–¥–∞—é—â–∞—è –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–µ—Ç—Å–∫–∏–µ –∫–Ω–∏–≥–∏ –ø–æ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ —Ä–µ–±—ë–Ω–∫–∞.  
–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å –æ—Ç –∏–¥–µ–∏ –¥–æ –≥–æ—Ç–æ–≤–æ–≥–æ –ø–µ—á–∞—Ç–Ω–æ–≥–æ PDF, —Å–æ—Ö—Ä–∞–Ω—è—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä—É—á–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ.  
–í—Å—ë —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ ‚Äî —á–µ—Ä–µ–∑ Telegram-–±–æ—Ç–∞, –∞ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ ‚Äî –≤ –æ–±–ª–∞–∫–µ Google Cloud (Firestore, GCS, Sheets).

---

### ‚öôÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
booksoul_factory/
  ‚îú‚îÄ‚îÄ src/
  ‚îÇ   ‚îú‚îÄ‚îÄ router/              # –ì–ª–∞–≤–Ω—ã–π –º–æ–∑–≥ —Ñ–∞–±—Ä–∏–∫–∏ (GPT-Router)
  ‚îÇ   ‚îú‚îÄ‚îÄ storywriter/         # –°—Ü–µ–Ω–∞—Ä–Ω—ã–π —Ü–µ—Ö (—Ç–µ–∫—Å—Ç—ã –∏ —Å—Ü–µ–Ω—ã)
  ‚îÇ   ‚îú‚îÄ‚îÄ scene_builder/       # –•—É–¥–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —Ü–µ—Ö (Nano Banana / Gemini Image)
  ‚îÇ   ‚îú‚îÄ‚îÄ style_engine/        # –°—Ç–∏–ª–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å (—Ü–≤–µ—Ç, —Å–≤–µ—Ç, —Å—Ç–∏–ª—å)
  ‚îÇ   ‚îú‚îÄ‚îÄ cover_builder/       # –ù–æ–≤—ã–π —Ü–µ—Ö: —Å–æ–∑–¥–∞–Ω–∏–µ –∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –æ–±–ª–æ–∂–∫–∏ –∫–Ω–∏–≥–∏
  ‚îÇ   ‚îú‚îÄ‚îÄ layout_engine/       # –í—ë—Ä—Å—Ç–∫–∞ –∏ PDF (Slides + ReportLab)
  ‚îÇ   ‚îú‚îÄ‚îÄ telegram_interface/  # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏ –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å —á–µ—Ä–µ–∑ Telegram
  ‚îÇ   ‚îú‚îÄ‚îÄ data_layer/          # Firestore, GCS, Sheets
  ‚îÇ   ‚îú‚îÄ‚îÄ utils/               # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É—Ç–∏–ª–∏—Ç—ã
  ‚îÇ   ‚îî‚îÄ‚îÄ main.py              # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–æ–µ–∫—Ç–∞
  ‚îú‚îÄ‚îÄ requirements.txt
  ‚îú‚îÄ‚îÄ .env.example
  ‚îú‚îÄ‚îÄ .gitignore
  ‚îú‚îÄ‚îÄ LICENSE
  ‚îî‚îÄ‚îÄ README.md
```

---

### üè≠ –¶–µ–ø–æ—á–∫–∞ —Ñ–∞–±—Ä–∏–∫–∏ BookSoul

1. **StoryWriter** ‚Äî –ø–∏—à–µ—Ç —Å–∫–∞–∑–∫—É –ø–æ —Ç–µ–º–µ, –¥–µ–ª–∏—Ç –Ω–∞ —Å—Ü–µ–Ω—ã, —Å–æ–∑–¥–∞—ë—Ç –æ–ø–∏—Å–∞–Ω–∏—è –∏ –ø—Ä–æ–º—Ç—ã.  
2. **SceneBuilder** ‚Äî –≤–∏–∑—É–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å—Ü–µ–Ω—ã —á–µ—Ä–µ–∑ Nano Banana (Gemini 2.5 Image).  
3. **Style Engine** ‚Äî –ø—Ä–∏–≤–æ–¥–∏—Ç –≤—Å–µ –∫–∞—Ä—Ç–∏–Ω–∫–∏ –∫ –µ–¥–∏–Ω–æ–º—É —Å—Ç–∏–ª—é –∏ —Ç–æ–Ω—É.  
4. **Cover Builder** ‚Äî —Å–æ–∑–¥–∞—ë—Ç –∏ –æ—Ñ–æ—Ä–º–ª—è–µ—Ç –æ–±–ª–æ–∂–∫—É –∫–Ω–∏–≥–∏ (–≥–µ—Ä–æ–π, —Ñ–æ–Ω, –∑–∞–≥–æ–ª–æ–≤–æ–∫).  
5. **Layout Engine** ‚Äî —Å–æ–±–∏—Ä–∞–µ—Ç –∫–Ω–∏–≥—É, —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –ø–µ—á–∞—Ç–Ω—ã–π PDF-—Ñ–∞–π–ª (A5, 300 DPI).  
6. **Telegram Interface** ‚Äî –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —É–¥–æ–±–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏.  
7. **Data Layer** ‚Äî —Å–≤—è–∑—ã–≤–∞–µ—Ç –≤—Å—ë —Å Firestore, Google Sheets –∏ GCS.  
8. **Router** ‚Äî –≥–ª–∞–≤–Ω—ã–π —É–ø—Ä–∞–≤–ª—è—é—â–∏–π –ø—Ä–æ—Ü–µ—Å—Å–æ–º, —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∑–∞–¥–∞—á–∏ –∏ —Å–ª–µ–¥–∏—Ç –∑–∞ —Å—Ç–∞—Ç—É—Å–∞–º–∏.

---

### üîß –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------------|-------------|
| **FastAPI** | API-—Å–µ—Ä–≤–µ—Ä —Ñ–∞–±—Ä–∏–∫–∏ |
| **aiogram** | –¢–µ–ª–µ–≥—Ä–∞–º-–±–æ—Ç (–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è) |
| **OpenAI / Gemini** | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–æ–≤ –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π |
| **Google Cloud Firestore** | –•—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∞–Ω–Ω—ã—Ö –∏ —Å—Ç–∞—Ç—É—Å–æ–≤ |
| **Google Cloud Storage** | –•—Ä–∞–Ω–∏–ª–∏—â–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ PDF |
| **Google Sheets API** | –ñ—É—Ä–Ω–∞–ª —Å—Ç–∞–¥–∏–π –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ |
| **ReportLab** | –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –ø–µ—á–∞—Ç–Ω–æ–≥–æ PDF |
| **Pillow / OpenCV** | –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (Style Engine) |
| **python-dotenv** | –†–∞–±–æ—Ç–∞ —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è |

---

### üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
pip install -r requirements.txt
```

---

### ‚ñ∂Ô∏è –ó–∞–ø—É—Å–∫

```bash
python src/main.py
```

---

### üîë –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π —Ñ–∞–π–ª `.env` –Ω–∞ –æ—Å–Ω–æ–≤–µ —à–∞–±–ª–æ–Ω–∞ `.env.example`:

```
TELEGRAM_BOT_TOKEN=
OPENAI_API_KEY=
GEMINI_API_KEY=
GOOGLE_PROJECT_ID=booksoul-factory
GOOGLE_APPLICATION_CREDENTIALS=service_account.json
GCS_BUCKET=booksoul-bucket
FIRESTORE_COLLECTION=books
SHEETS_ID=
REPORTLAB_FONT=HeiseiMin-W3
```

---

### üìÇ –û—Å–Ω–æ–≤–Ω—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏

| –ü–∞–ø–∫–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|-----------|
| `router/` | –ú–æ–∑–≥ —Ñ–∞–±—Ä–∏–∫–∏, —É–ø—Ä–∞–≤–ª—è–µ—Ç –≤—Å–µ–º–∏ –æ—Ç–¥–µ–ª–∞–º–∏ |
| `storywriter/` | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞ –∏ —Å—Ü–µ–Ω |
| `scene_builder/` | –°–æ–∑–¥–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (Nano Banana) |
| `style_engine/` | –°—Ç–∏–ª–∏—Å—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ |
| `cover_builder/` | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –æ–±–ª–æ–∂–∫–∏ |
| `layout_engine/` | –í—ë—Ä—Å—Ç–∫–∞ –∫–Ω–∏–≥–∏ –∏ —ç–∫—Å–ø–æ—Ä—Ç PDF |
| `telegram_interface/` | –†–∞–±–æ—Ç–∞ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º |
| `data_layer/` | –°–≤—è–∑—å —Å Firestore, Sheets, GCS |
| `utils/` | –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ |

---

### üìò –õ–∏—Ü–µ–Ω–∑–∏—è
MIT License ¬© 2025 **Soul Factory**

---

### üí° –ò–¥–µ—è
BookSoul ‚Äî —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∫–Ω–∏–≥.  
–≠—Ç–æ —Ç–≤–æ–π –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –∫–Ω–∏–∂–Ω—ã–π –∑–∞–≤–æ–¥: —Ç—ã –∑–∞–≥—Ä—É–∂–∞–µ—à—å —Ñ–æ—Ç–æ –∏ –∏–¥–µ—é, –∞ —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç —ç—Ç–æ –≤ —Å–∫–∞–∑–∫—É, –∏–ª–ª—é—Å—Ç—Ä–∞—Ü–∏–∏ –∏ –≥–æ—Ç–æ–≤—É—é –ø–µ—á–∞—Ç–Ω—É—é –∫–Ω–∏–≥—É.  
**–ò–ò, –∫–æ—Ç–æ—Ä–∞—è –¥–∞—Ä–∏—Ç –ª—é–¥—è–º —Å–∞–º—ã–π –±–æ–ª—å—à–æ–π –∞–∫—Ç–∏–≤ ‚Äî –≤—Ä–µ–º—è.**
